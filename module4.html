<!doctype html>
<html lang="en">
<head>
	<base target='_blank'/> <!--will make each link default open in new tab-->
    <meta charset="utf-8"/>
	<meta name="google-site-verification" content="Hl1D8Wi_Na9rBhnPm51m6rstMdR3t3WR38vQS9t1keo" /><!--verifying site for the purpose of google-->
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0, user-scalable=0, shrink-to-fit=no"/><!--viewport is user's visible area of web page-->
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>    
    <meta name="description" content="An online course/workshop for learning how to program online social science experiments."/><!--To increase SEO, add description, keywords, author, etc. -->
    <meta name="keywords" content="Social Science, JavaScript, HTML, CSS, Qualtrics, Amazon Mechanical Turk"/>
    <meta name="author" content="Christina Bejjani"/>

	<title>Module 4 of Introductory Programming for Online Social Science Experiments</title>
	
	<!-- Favicons-->
	<link href="files/favi_icon_website.png" rel="icon" type="image/x-icon" /> 
	<link rel="apple-touch-icon" href="files/favi_icon_website_180.png" sizes="180x180">
	<link rel="icon" href="files/favi_icon_website_32.png" sizes="32x32" type="image/png">
	<link rel="icon" href="files/favi_icon_website_16.png" sizes="16x16" type="image/png">
	
	<!--This is for the open graph framework, which sites like Facebook, Twitter, LinkedIn etc. use, esp when the site URL is shared -->
	<meta property='og:url' content='https://socsciprogramming.github.io/module4.html'/>
	<meta property='og:title' content='Introductory Programming for Online Social Science Experiments'/>
	<meta property='og:description' content='An online course/workshop for learning how to program online social science experiments.'/>
	<meta property='og:type' content='website'/>
	<meta property='og:image' content='files/twittercard.png'/>
	<meta property="og:image:type" content="image/png">
	<meta property="og:image:width" content="1280">
	<meta property="og:image:height" content="640">
		
	<!--This is for those little thumbnails when the link is shared on twitter -->
	<meta name='twitter:card' content='summary'/>
	<meta name='twitter:site' content='@chbejjani'/>
	<meta name='twitter:creator' content='@chbejjani'/>
	<meta name='twitter:url' content='https://socsciprogramming.github.io/module4.html'/>
	<meta name='twitter:image' content='files/twittercard.png'/>
	<meta name='twitter:description' content='An online course/workshop for learning how to program online social science experiments.'/>
	<meta name='twitter:title' content='Introductory Programming for Online Social Science Experiments'/>
	
    <!--rel canonical is a way of defining canonical page for similar or duplicate pages -->
	<link href='https://socsciprogramming.github.io/module4.html' rel='canonical'/> 
	
    <!-- Bootstrap core CSS + font awesome JS for icons-->
    <link href="css/bootstrap.min.css" rel="stylesheet">
	<script src="https://kit.fontawesome.com/25e7f7a6fa.js" crossorigin="anonymous"></script>
	
	<!-- Custom CSS -->
	<link href="css/allpages.css" rel="stylesheet">
	
	<!-- Loading fonts; pairing serif fonts in headers w/ sans serif for body-->
	<link href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,300;0,400;0,600;0,700;1,300;1,400;1,600;1,700&family=Playfair+Display+SC:wght@400;700&family=Playfair+Display:ital,wght@0,400;0,700;1,400&display=swap" rel="stylesheet">
	
	<!-- Global site tag (gtag.js) - Google Analytics -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=G-5K6E5T95PP"></script>
	<script>
	  window.dataLayer = window.dataLayer || [];
	  function gtag(){dataLayer.push(arguments);}
	  gtag('js', new Date());

	  gtag('config', 'G-5K6E5T95PP');
	</script>
</head>
<body>
	<nav class="navbar navbar-expand-md fixed-top bg-blue">
		<button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarNavDropdown" aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
			<span class="fas fa-bars"></span>
		</button>
		<a class="navbar-brand" href="#" target="_self">
			<img src="files/logo.png" width="30" height="30" class="d-inline-block align-top" alt="logo">
		</a>
		<div class="collapse navbar-collapse" id="navbarNavDropdown">
			<ul class="navbar-nav">
				<li class="nav-item">
					<a class="nav-link navb-link" href="index.html" target="_self">Home <span class="sr-only">(current)</span></a>
				</li>
				<li class="nav-item">
					<a class="nav-link navb-link" href="about.html" target="_self">About</a>
				</li>
				<li class="nav-item">
					<a class="nav-link navb-link" href="contribute.html" target="_self">How to Contribute</a>
				</li>
				<li class="nav-item">
					<a class="nav-link navb-link" href="wishlist.html" target="_self">Wishlist</a>
				</li>
				<li class="nav-item dropdown d-sm-block d-md-none">
					<a class="nav-link dropdown-toggle navb-link" href="#" id="smallerscreenmenu" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Modules</a>
					<div class="dropdown-menu bg-blue" aria-labelledby="smallerscreenmenu">
						<a class="dropdown-item navb-link" href="module1.html" target="_self">Module 1</a>
						<a class="dropdown-item navb-link" href="module2.html" target="_self">Module 2</a>
						<a class="dropdown-item navb-link" href="module3.html" target="_self">Module 3</a>
						<a class="dropdown-item navb-link" href="module4.html" target="_self">Module 4</a>
					</div>
				</li>
			</ul>
		</div>
	</nav>
	<div class="row" id="body-row">
		<div id="sidebar-container" class="d-none d-md-block col-2 bg-grey">
			<ul class="list-group sticky-top sticky-offset">
				<li class="list-group-item text-muted d-flex align-items-center">
					<small><b>MODULES</b></small>
				</li>
				<a href="module1.html" target="_self"  aria-expanded="false" class="list-group-item flex-column align-items-start">
					<div class="d-flex w-100 justify-content-start align-items-center">
						<span class="if-collapsed fas fa-angle-up mr-3"></span>
						<!--<span class="if-not-collapsed fas fa-angle-down mr-3"></span>-->
						<span class="copy-link">1: Crowdsourced Experiments</span>
					</div>
				</a>
				<a href="module2.html" target="_self" aria-expanded="false" class="list-group-item flex-column align-items-start">
					<div class="d-flex w-100 justify-content-start align-items-center">
						<span class="if-collapsed fas fa-angle-up mr-3"></span>
						<!--<span class="if-not-collapsed fas fa-angle-down mr-3"></span>-->
						<span class="copy-link">2: Basic Survey Design</span>
					</div>
				</a>
				<a href="module3.html" target="_self" aria-expanded="false" class="list-group-item flex-column align-items-start">
					<div class="d-flex w-100 justify-content-start align-items-center">
						<span class="if-collapsed fas fa-angle-up mr-3"></span>
						<!--<span class="if-not-collapsed fas fa-angle-down mr-3"></span>-->
						<span class="copy-link">3: Customized Design with JavaScript, HTML, &amp; CSS</span>
					</div>
				</a>
				<a href="#submenu4" target="_self" data-toggle="collapse" aria-expanded="true" class="list-group-item flex-column align-items-start">
					<div class="d-flex w-100 justify-content-start align-items-center">
						<span class="if-collapsed fas fa-angle-up mr-3"></span>
						<span class="if-not-collapsed fas fa-angle-down mr-3"></span>
						<span class="copy-link active">4: Advanced Customization</span>
					</div>
				</a>
				<div id="submenu4" class="sidebar-submenu">
					<a href="#subsec41" target="_self" class="list-group-item">
						<span class="copy-link anchor">Common Considerations</span>
					</a>
					<a href="#subsec42" target="_self" class="list-group-item">
						<span class="copy-link anchor">Beyond the Basics</span>
					</a>
					<a href="#subsec43" target="_self" class="list-group-item">
						<span class="copy-link anchor">Web Development</span>
					</a>
					<a href="#subsec44" target="_self" class="list-group-item">
						<span class="copy-link anchor">More on MTurk</span>
					</a>
					<a href="#testyourself" target="_self" class="list-group-item">
						<span class="copy-link anchor">Test yourself</span>
					</a>
				</div>
			</ul>
		</div>
		<div class="col py-3" id="page-content">
			<main>
				<section>
					<h1>Module 4: Advanced Customization</h1>
					<div class="card">
						<div class="card-header">Learning Goals</div>
						<div class="card-body">
							<ul class="fa-ul card-text">
								<li><i class="fa-li fas fa-database"></i>Apply knowledge of JavaScript, CSS, and HTML to exclude participants, create a website, and address typical concerns about online experiments</li>
								<li><i class="fa-li fab fa-stack-overflow"></i>Consider limitations of MTurk and who is being tested</li>
								<li><i class="fa-li fas fa-user-graduate"></i>Communicate the results of a sample demonstration</li>
							</ul>
						</div>
					</div>
					<div>
						<p>This last module is for a few additional considerations that you ought to take into account while deciding whether or not you want to go ahead and program your entire task, the extent to which you really need customization, whether you want to get into other JavaScript libraries or stick with common survey methods, and more.</p>
					</div>
				</section>
				<hr>
				<section>
					<h2 id="subsec41" class="pad1">Common Considerations</h2>
				</section>
				<section>
					<ul class="fa-ul"><li><span class="fa-li"><i class="fas fa-star"></i></span><h4 id="subsec41t1">How much customization do you need?</h4></li></ul>
					<div>
						<p>There are a number of programs that will help you convert your scripts into JavaScript ready tasks and a number of resources - if you're willing to pay - that make it possible for you not to code your task. There's also the possibility of simply mixing in programs. For example, I have a long, complicated study where people do two attention tasks and then have to fill out a bunch of questionnaires about psychiatric symptoms. I could have coded the questionnaires also in JavaScript, like the tasks, but it seemed easier to have participants just do the questionnaires within Qualtrics, which is already made to make questions like those look and feel nice. It saved a lot of time to do that. Plus everything looks a lot nicer when using Qualtrics because they've specifically designed their survey platform to be user friendly. However, their JavaScript functions are NOT designed for any sort of complex tasks - I've heard from a lot of other researchers that this can get really buggy.</p>
						
						<p>In some cases, you might need to write custom code to make things work too. For instance, if you've coded your task for Amazon Mechanical Turk, and then you want to run participants online in the psychology pool of students, then you would have to write your own way of incorporating the code. The <a href="https://www.sona-systems.com/help/" class="copy-link">SONA system</a> - where psychology students are granted credit for participating in studies - for instance offers a lot of integration with known systems like Qualtrics, but does not with custom code. You can also see lists of programs that are known to convert online tasks and surveys over at that SONA link.</p>
						
						<p>If you do need to use custom code, for a complicated task, that isn't supported by SONA, I can tell you how I used the existing system to make it work! In the next section, I include the PHP that our lab uses as an example of how to allow for custom data submission. In that custom PHP, I include some code to make it work with what's needed on SONA for automatic credit granting for these online participants.</p>

						<p>[copy/paste instructions from the word doc I wrote up]</p>
					</div>
				</section>
				<section>
					<ul class="fa-ul"><li><span class="fa-li"><i class="fas fa-star"></i></span><h4 id="subsec41t2">Storing Data</h4></li></ul>
					<div>
						<p>OK, so we've already talked about storing data via Qualtrics - they have a database server on their back-end - and we've talked about sending the form HTML element to the sandbox MTurk link. You can also send the data to the official MTurk site (), and you can talk with your colleagues about creating a PHP script specfically for your lab, with its own computer server. That might also be something to talk with your IT folks (with respect to establishing the server itself). One reason you might not want to send the data to the MTurk site/link that they've provided is that you don't know how exactly it works. Sometimes I've used this and not known why some participants don't have data and others do - how did their system fail? How can I go ahead and fix any errors? I would not know. On the other hand, it's very convenient to use the resources that you have available to you.</p>
						
						<p>If you do want other ways of storing data, like custom lab-specific PHP files, let's take a look at what that might mean for you. This is a basic PHP script as written by <a href="https://myweb.uiowa.edu/jiefjiang/Teaching/OnlineTask/Receiver.php" class="copy-link">Jiefeng Jiang</a>.</p>
						
						<div class="highlight"><pre><code class="language-html" data-lang="php">
						&lt;?php
							//generate confirmation code
							function random_str($length, $keyspace = '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ')
							{
								$str = '';
								$max = 61;
								for ($i = 0; $i &lt; $length; ++$i) {
									$str .= $keyspace[rand(0, $max)];
								}
								return $str;
							}

							echo "&lt;h2&gt;Uploading data... &lt;/h2&gt;";
							
							$cCode = random_str(8);
							
							$fid1 = fopen($cCode.".txt", 'w');
							fwrite($fid1, $_REQUEST['logFile']);
							fclose($fid1);
							
							$returnMsg = "Data successfully uploaded. This is your confirmation code: ".$cCode;
							echo "&lt;h2&gt;".$returnMsg."&lt;/h2&gt;";
						?&gt;
						</code></pre></div>
						
						<p></p>
						
						<p>You can also see an example <a href="https://github.com/nbrosowsky/simple-stroop-demo/blob/master/feedback.php" class="copy-link">feedback php file from Nick</a> as well as the <a href="https://github.com/nbrosowsky/simple-stroop-demo/blob/master/server-side.php" class="copy-link">server-side php file</a>.</p>
						
						<p>....</p>
						
						<p>....</p>
						
						<p>....</p>
					</div>
				</section>
				<section>
					<ul class="fa-ul"><li><span class="fa-li"><i class="fas fa-star"></i></span><h4 id="subsec41t3">Checking Inattention</h4></li></ul>
					<div>
						<!--
						
						Attention checks, multitasking experiment code (in Qualtrics and JavaScript/jquery), check screen size function, data analysis
						
						-->
						
						<p>....</p>
						
						<p>....</p>
						
						<p>....</p>
						
						<p>....</p>
						
						<p>And, remember, if a worker is inattentive, as I went over in Module 3, you can always exclude them [manually in the code and/or via MTurk Qualifications (see Module 1)] so they cannot take your task again.</p>
						
						<p>Please remember to evaluate the subsection with the Google Form below so this can be improved in the future (you can find the results from the <a href="https://docs.google.com/spreadsheets/d/1tahPeyA2D52xF_qPMHSFkQuxwQ4Z-3gdwP4n-PO0rmM/edit?usp=sharing" class="copy-link">Google Form</a> here).</p>
						
						<div id="googleForm"><iframe src="https://docs.google.com/forms/d/e/1FAIpQLSfWoxpD6QDKfSEFR2BMvNWmLfdF2k4HrTOwoAkVrL_6AbrGaw/viewform?embedded=true" width="640" height="902" frameborder="0" marginheight="0" marginwidth="0">Loading…</iframe></div>
					</div>
				</section>
				<hr>
				<section>
					<h2 id="subsec42" class="pad1">Beyond the Basics</h2>
					<div>
						<p>....</p>
						
						<p>....</p>
					</div>
				</section>
				<section>
					<ul class="fa-ul"><li><span class="fa-li"><i class="fas fa-star"></i></span><h4 id="subsec42t1">Additional Modification of Basic Demos</h4></li></ul>
					<div>
						<!--
						
						Add a proportion congruent manipulation to the basic Stroop experiment, add in basic “feedback” for correct responses (depending on listener event), add in an ITI, etc. This is, in some ways, a reminder of the “script” comparisons from the previous module.
						
						-->
						
						<p>....</p>
						
						<p>....</p>
						
						<p>....</p>

						<p>....</p>
						
						<p>....</p>
					</div>
				</section>
				<section>
					<ul class="fa-ul"><li><span class="fa-li"><i class="fas fa-star"></i></span><h4 id="subsec42t2">Grabbing MTurk Information</h4></li></ul>
					<div>
						<p>As I mentioned within the JavaScript basics subsection and again in the Demos & Scripts subsection of Module 3, MTurk has recently changed up how it sends information about worker ID and assignment ID. I mentioned that I sometimes just have participants fill an input element with their worker ID. That works fine. But if you want another method, <a href="https://nbrosowsky.github.io/" class="copy-link">Dr. Nick Brosowsky</a> has shared the following code for a HIT. Remember how we went over how MTurk uses HTML? Input this HTML into a HIT on requester sandbox, publish a batch, and then accept the HIT as a worker on worker sandbox. What do you see there?</p>
						
						<div class="highlight"><pre><code class="language-html" data-lang="html">	
						&lt;meta content="width=device-width,initial-scale=1" name="viewport" /&gt;
						&lt;section class="container" id="SurveyLink"&gt;&lt;!-- Instructions --&gt;
						&lt;div style="margin: 25px"&gt;
						&lt;p&gt;The purpose of this research is to investigate creative idea generation.&lt;/p&gt;

						&lt;p&gt;Your Worker ID is: &lt;span id="your_id"&gt; HIT NOT ACCEPTED YET&lt;/span&gt;&lt;/p&gt;

						&lt;p&gt;The iframe URL parameters are currently: &lt;span id="your_url"&gt; NOTHING HERE YET &lt;/span&gt;&lt;/p&gt;

						&lt;p&gt;In this HIT, you will ...&lt;/p&gt;

						&lt;p&gt;To complete this HIT, click the link below (the survey will pop-up in a new browser window).&lt;/p&gt;

						&lt;p&gt;&lt;strong&gt;Make sure to leave this window open as you complete the survey.&nbsp;&lt;/strong&gt;When you are finished, you will return to this page to paste the code into the box.&lt;/p&gt;
						&lt;/div&gt;

						&lt;div class="row" id="workContent"&gt;
						&lt;div class="col-xs-12 col-md-6 col-md-offset-3"&gt;
						&lt;p&gt;Survey link:&lt;/p&gt;
						&lt;a href="https://socsciprogramming.github.io" id="your_a" onclick="window.open(this.href, 'Experiment', 'resizable=no,status=no,location=no,toolbar=no,menubar=no,fullscreen=no,scrollbars=no,dependent=no'); return false;"&gt;EXPERIMENT LINK&lt;/a&gt;&lt;/div&gt;
						&lt;/div&gt;
						&lt;!-- End Content for Worker --&gt;&lt;!-- Input from Worker --&gt;

						&lt;div class="form-group"&gt;&lt;label for="surveycode"&gt;Provide the survey code here:&lt;/label&gt; &lt;input class="form-control" id="surveycode" name="surveycode" placeholder="e.g. 123456" required="" type="text" /&gt;&lt;/div&gt;
						&lt;!-- End input from Worker --&gt;&lt;/section&gt;
						&lt;!-- Close internal style sheet --&gt;&lt;!-- External JS references --&gt;&lt;script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha256-cCueBR6CsyA4/9szpPfrX3s49M9vUU5BgtiJj06wt/s=" crossorigin="anonymous"&gt;&lt;/script&gt;&lt;script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.0.3/js/bootstrap.min.js" integrity="sha384-s1ITto93iSMDxlp/79qhWHi+LsIi9Gx6yL+cOKDuymvihkfol83TYbLbOw+W/wv4" crossorigin="anonymous"&gt;&lt;/script&gt;&lt;!-- Open internal javascript --&gt;&lt;script&gt;
							$(document).ready(function() {

								var mTurk = {
									// core.turkInfo gets information relevant to mechanical turk experiments. returns an object
									// containing the workerID, assignmentID, and hitID, and whether or not the HIT is in
									// preview mode, meaning that they haven't accepted the HIT yet.
									turkInfo: function() {

										var turk = {};

										var param = function(url, name) {
											name = name.replace(/[\[]/, "\\\[").replace(/[\]]/, "\\\]");
											var regexS = "[\\?&]" + name + "=([^&#]*)";
											var regex = new RegExp(regexS);
											var results = regex.exec(url);
											return (results == null) ? "" : results[1];
										};

										var src = param(window.location.href, "assignmentId") ? window.location.href : document.referrer;

										var keys = ["assignmentId", "hitId", "workerId", "turkSubmitTo"];
										keys.map(

											function(key) {
												turk[key] = unescape(param(src, key));
											});

										turk.previewMode = (turk.assignmentId == "ASSIGNMENT_ID_NOT_AVAILABLE");

										turk.outsideTurk = (!turk.previewMode && turk.hitId === "" && turk.assignmentId == "" && turk.workerId == "")

										turk_info = turk;

										return turk;

									},

									// core.submitToTurk will submit a MechanicalTurk ExternalHIT type
									// *** MUST BE RUN FROM MTURK IFRAME *** //

									// data = key:value pairs
									//   e.g., data = {
									//   "question1" : "answer1",
									//   "question2" : "answer2"
									// }

									// final output URL example:
									// url + "/mturk/externalSubmit?" + data
									//"https://www.mturk.com/mturk/externalSubmit?question1=answer1&question2=answer2&assignmentId=23343234kfkdsn1"

									submitToTurk: function(data) {

										var turkInfo = mTurk.turkInfo();
										var assignmentId = turkInfo.assignmentId;
										var turkSubmitTo = turkInfo.turkSubmitTo;

										if (!assignmentId || !turkSubmitTo) return;

										var dataString = [];

										for (var key in data) {
											if (data.hasOwnProperty(key)) {
												dataString.push(key + "=" + encodeURI(data[key]));
											}
										}

										dataString.push("assignmentId=" + assignmentId);

										var url = turkSubmitTo + "/mturk/externalSubmit?" + dataString.join("&");

										window.location.href = url;
									},

									append_array: function(array, formID) {
										let form = document.getElementById(formID)
										for (i = 0; i &lt; array.length; i++) {
											ni = document.createElement("input")
											ni.setAttribute("type", "hidden")
											ni.setAttribute("name", i.toString())
											ni.value = array[i].join(", ")
											form.appendChild(ni)
										}
									},

									append_text: function(text, formID, name) {
										let form = document.getElementById(formID)
										ni = document.createElement("input")
										ni.setAttribute("type", "hidden")
										ni.setAttribute("name", name)
										ni.value = text
										form.appendChild(ni)
									}


								};

								document.querySelector("#your_id").innerHTML = mTurk.turkInfo().workerId
								document.querySelector("#your_url").innerHTML = window.location.search
								document.querySelector("#your_a").href = document.querySelector("#your_a").href + window.location.search
							});

						&lt;/script&gt;&lt;!-- Close internal javascript --&gt;						
						</code></pre></div>
						
						<p>This code should essentially show you your workerID + the URL parameters that you need, including assignmentId, hitId, and workerId. Although MTurk has changed its parameters so that it's harder to get these values from doing a string split in your code, you can still get this information from within the HIT itself.</p>
						
						<p>How do you actually do this? Well, let's take a look at the key code. If you have this pulled up on sandbox, you'll see that it says something like "The iframe URL parameters are currently: ?assignmentId=37UTHISINSOWFAKERTQZR13&hitId=3CMIQF80FAKEFAKEFAKE8WG9N79J6Q8&workerId=A3FAKEID&turkSubmitTo=https%3A%2F%2Fworkersandbox.mturk.com." And if you look at the code, where this HTML element is, it refers to the value of your_url. Let's look at where we're getting your_url. <code>document.querySelector("#your_url").innerHTML = window.location.search</code> essentially holds this information and one way that you can get this in your own code is in the next part: <code>document.querySelector("#your_a").href = document.querySelector("#your_a").href + window.location.search</code>. Essentially, this means that your Experiment Link will have the URL parameters appended to the end of the link.</p>

						<p>With that information at the end of the link, you can then use string splitters to get out the data. You would need to tell it to look for assignmentId and workerId and hitId after the ?, which is fairly simple. But lucky for you, Nick has also shared a function that grabs all the URL parameters and puts them into an object:</p>
						
						<div class="highlight"><pre><code class="language-js" data-lang="javascript">	
						function getAllUrlParams(url) {
						  // get query string from url (optional) or window
						  var queryString = url ? url.split('?')[1] : window.location.search.slice(1);

						  // we'll store the parameters here
						  var obj = {};

						  // if query string exists
						  if (queryString) {

							  // stuff after # is not part of query string, so get rid of it
							  queryString = queryString.split('#')[0];

							  // split our query string into its component parts
							  var arr = queryString.split('&');

							  for (var i = 0; i &lt; arr.length; i++) {
								  // separate the keys and the values
								  var a = arr[i].split('=');

								  // set parameter name and value (use 'true' if empty)
								  var paramName = a[0];
								  var paramValue = typeof (a[1]) === 'undefined' ? true : a[1];

								  // (optional) keep case consistent
								  paramName = paramName.toLowerCase();
								  if (typeof paramValue === 'string') paramValue = paramValue.toLowerCase();

								  // if the paramName ends with square brackets, e.g. colors[] or colors[2]
								  if (paramName.match(/\[(\d+)?\]$/)) {

									  // create key if it doesn't exist
									  var key = paramName.replace(/\[(\d+)?\]/, '');
									  if (!obj[key]) obj[key] = [];

									  // if it's an indexed array e.g. colors[2]
									  if (paramName.match(/\[\d+\]$/)) {
										  // get the index value and add the entry at the appropriate position
										  var index = /\[(\d+)\]/.exec(paramName)[1];
										  obj[key][index] = paramValue;
									  } else {
										  // otherwise add the value to the end of the array
										  obj[key].push(paramValue);
									  }
								  } else {
									  // we're dealing with a string
									  if (!obj[paramName]) {
										  // if it doesn't exist, create property
										  obj[paramName] = paramValue;
									  } else if (obj[paramName] && typeof obj[paramName] === 'string') {
										  // if property does exist and it's a string, convert it to an array
										  obj[paramName] = [obj[paramName]];
										  obj[paramName].push(paramValue);
									  } else {
										  // otherwise add the property
										  obj[paramName].push(paramValue);
									  }
								  }
							  }
						  }

						  return obj;
					  }
						</code></pre></div>
						
						<p>Essentially this means you have a few options when using MTurk: you can ask participants to input their own workerID and then care less about assignment & hit ID, OR you can insert <code>document.querySelector("a").href = document.querySelector("a").href + window.location.search</code> into the MTurk HIT interface source code and use the function above (or develop your own!) to take out the cookie information appended to each worker's link to your task.</p>
					</div>
				</section>
				<section>
					<ul class="fa-ul"><li><span class="fa-li"><i class="fas fa-star"></i></span><h4 id="subsec42t3">Additional JavaScript Libraries</h4></li></ul>
					<div>
						<p>I talked about different JavaScript libraries like Jspsych and JQuery in Module 3, and I briefly want to acknowledge that this is just the TIP of the iceberg.</p>
						
						<p><a href="https://hackr.io/blog/top-javascript-libraries" class="copy-link">There are so, so many other JavaScript libraries</a>, depending on your goals. For instance, an undergraduate RA who worked with Brenda Yang and me on creating a <a href="mindsetmapper.org" class="copy-link">web application</a> used the framework <a href="https://reactjs.org/" class="copy-link">react.js</a> to build the user interface. So many different companies are associated with each library - I've most often heard react.js associated with Facebook, and as the first link suggests, there's a JavaScript library maintained by Google, another by Microsoft. Uber, WhatsApp and other websites use yet another JavaScript library--I can't tell you what's the best. Even that article acknowledges that jQuery is used by companies like Microsoft, Netflix, and Google, but again this is yet another reminder that learning the fundamentals and how to manipulate those will help you decide whether or not you'd like to use a library.</p>

						<p>Please remember to evaluate the subsection with the Google Form below so this can be improved in the future (you can find the results from the <a href="https://docs.google.com/spreadsheets/d/1FLLwNRznLbftPfIvqW6UzTaPciR6gRriUH2AF2plqrE/edit?usp=sharing" class="copy-link">Google Form</a> here).</p>
						
						<div id="googleForm"><iframe src="https://docs.google.com/forms/d/e/1FAIpQLSeaJtPD7-Ygb9eXRi0ovH6fsFONohbKjaiVOQdNftCiKom0ZA/viewform?embedded=true" width="640" height="902" frameborder="0" marginheight="0" marginwidth="0">Loading…</iframe></div>
					</div>
				</section>
				<hr>
				<section>
					<h2 id="subsec43" class="pad1">Web Development</h2>
					<div>
						<p>....</p>
						
						<p>....</p>
					</div>
				</section>
				<section>
					<ul class="fa-ul"><li><span class="fa-li"><i class="fas fa-star"></i></span><h4 id="subsec43t1">Additional CSS Frameworks</h4></li></ul>
					<div>
						<!--
						
						Can link to the co-lab resources on making your own website, explaining also what bootstrap CSS is/does, and common thoughts on design
						
						https://www.altexsoft.com/blog/engineering/most-popular-responsive-css-frameworks-bootstrap-foundation-materialize-pure-and-more/
						
						Materialize, Bootstrap, Foundation
						
						material CSS and 
						
						-->
						
						<p>Why start from scratch with thinking about your design? If you're really looking for additional ...</p>
						
						<p>....</p>
						
						<p>....</p>

						<p>....</p>
						
						<p>....</p>
					</div>
				</section>
				<section>
					<ul class="fa-ul"><li><span class="fa-li"><i class="fas fa-star"></i></span><h4 id="subsec43t2">Applying coding to website</h4></li></ul>
					<div>
						<!--
						
						Let’s create a fake website and apply a premade theme to the site; how does our knowledge of HTML, CSS, JavaScript come into play here? Can link to co-lab roots courses as resources.
						
						-->
						
						<p>....</p>
						
						<p>....</p>
						
						<p>....</p>
						
						<p>....</p>
						
						<p>....</p>
					</div>
				</section>
				<section>
					<ul class="fa-ul"><li><span class="fa-li"><i class="fas fa-star"></i></span><h4 id="subsec43t3">Web-scraping</h4></li></ul>
					<div>
						<!--
						
						Some social science expts involve taking data out from other websites; this involves applying knowledge of HTML - i.e., what elements should I be scraping from a site?
						
						Resources to build this tutorial or link for students:
			●	https://www.datacamp.com/community/news/a-complete-guide-to-web-scraping-job-postings-ir2qbqj9f6r
			●	https://towardsdatascience.com/web-scraping-job-postings-from-indeed-com-using-selenium-5ae58d155daf
			●	https://towardsdatascience.com/automating-my-job-search-with-python-ee2b465c6a8f 
			●	https://www.octoparse.com/blog/web-scraping-job-postings
			●	https://medium.com/@msalmon00/web-scraping-job-postings-from-indeed-96bd588dcb4b 
			●	Example on jobs using HTML, JS, and CSS?
https://pswhitehead.com/post/blog2/
https://towardsdatascience.com/ethics-in-web-scraping-b96b18136f01 - ethics-in-web-scraping-b96b18136f01
khoi code
https://link.springer.com/article/10.1023/B:ETIN.0000047476.05912.3d
https://realpython.com/beautiful-soup-web-scraper-python/
https://levelup.gitconnected.com/web-scraping-with-selenium-in-python-8fde2f0fd559
https://opensource.com/article/20/5/web-scraping-python
			●	Web-scraping assignment: https://github.com/ppeyliang/web-scraping-job-postings 
						
						-->
						
						<p>....</p>
						
						<p>....</p>
						
						<p>....</p>
						
						<p>....</p>
						
						<p>....</p>

						<p>Please remember to evaluate the subsection with the Google Form below so this can be improved in the future (you can find the results from the <a href="https://docs.google.com/spreadsheets/d/1gf9hKVAAoBxFDyjOT9P8Q2O2oBQq2OHZvQFEy7ifRb0/edit?usp=sharing" class="copy-link">Google Form</a> here).</p>
						
						<div id="googleForm"><iframe src="https://docs.google.com/forms/d/e/1FAIpQLScpiSY-IFLZu-liLD60JohSLAhoR1E2Tv5dtyKYZWNlhdbDCw/viewform?embedded=true" width="640" height="902" frameborder="0" marginheight="0" marginwidth="0">Loading…</iframe></div>
					</div>
				</section>
				<section>
					<h2 id="subsec44" class="pad1">More on MTurk</h2>
					<div>
						<p>....</p>
						
						<p>....</p>
					</div>
				</section>
				<section>
					<ul class="fa-ul"><li><span class="fa-li"><i class="fas fa-star"></i></span><h4 id="subsec44t1">MTurk API</h4></li></ul>
					<div>
						<!--
						
						You can manage everything from an API linking between MTurk and your own Python script
						
						○	For example, they have a tutorial on setting up your HIT using Jupyter notebooks (https://blog.mturk.com/tutorial-mturk-using-python-in-jupyter-notebook-17ba0745a97f) 
						
						-->
						
						<p>....</p>
						
						<p>....</p>
						
						<p>....</p>

						<p>....</p>
						
						<p>....</p>
									
						<p>Additional Resources: <a href="https://blog.mturk.com/tutorial-crowdsourcing-from-the-command-line-a5bee86fdaa0" class="copy-link">Tutorial: Crowdsourcing from the command line</a>, <a href="https://blog.mturk.com/tutorial-using-the-mturk-requester-website-together-with-python-and-boto-4a7ef0264b7e" class="copy-link">Tutorial: Using the MTurk Requester Website together with Python and Boto</a>, <a href="https://blog.mturk.com/tutorial-mturk-using-python-in-jupyter-notebook-17ba0745a97f" class="copy-link">Tutorial: MTurk using Python in Jupyter Notebook</a></p>
					</div>
				</section>
				<section>
					<ul class="fa-ul"><li><span class="fa-li"><i class="fas fa-star"></i></span><h4 id="subsec44t2">Panels Based Research</h4></li></ul>
					<div>
						<!--
						
						At the end of the day, you may not want to interact with the API or participants generally. Do you have the money to pay?
						
						Add in here what the exact instructions w/ Duke contact was & who I emailed
						
						-->
						
						<p>I have talked with a Qualtrics Panels representative and used Prime Panels in a research project, and I can say that if you have the money to do so, it is sometimes nice to hand off worries about recruitment and participation to others. In this project, I specified a target population that I wanted Prime Panels to recruit for a survey based largely in Qualtrics. Based on my experience, the target population is not typically that large on MTurk, so that's why we wanted to use a company that would have a larger database for that demographic group. Also, on my end, it would take less time to have someone else do the study running, while I would have time to focus on the analysis. I reached out via the contact form on the website for Prime Panels and described the study, including estimated completion time, number and description of target population, and study purpose/goal. They gave me an estimate for how much $ per participant that would cost.</p>
						
						<p>They piloted the survey to see if they identified anything that would be an issue and told me that "generally, we ask that you take a cursory look for anything noticeably out of place within 3 days. That’s just for the basic speeders, straight liners, etc. so we can remove them from the sample pool quickly. After that, we’d ask for your deeper analysis for anyone that needs replaced to be done within 21 days." They also said that "[w]hen we launch a study, we send out invitations intermittently to account for the different types of attitudinal and behavioral differences in participants that take surveys in the morning, at night, etc. so you do not need to control for that." There may be other differences in how they run surveys.</p>
						
						<p>After the survey was finalized (post-piloting), the initial recruitment wasn't going as well as we liked: we had a lot of drop-out, so the survey was paused. We reassesed what could be done to improve the feasibility of the recruitment, both to ensure that we were targeting the right population and designing the survey to decrease the likelihood of drop-out. All in all, the process was relatively smooth, but obviously as noted, you don't necessarily know all the things they've done and the exact characteristics of who they've recruited.</p>
						
						<p>....</p>
						
						<p>....</p>
						
						<p>....</p>
						
						<p>....</p>
						
						<p>....</p>
					</div>
				</section>
				<section>
					<ul class="fa-ul"><li><span class="fa-li"><i class="fas fa-star"></i></span><h4 id="subsec44t3">Applied Scenarios of MTurk Research</h4></li></ul>
					<div>
						<!--
						
						●	Take email responses from MTurkers + reviews on MTurk as ways to think about your task
			●	Countdown for a task
			●	“Code froze” emails
			●	Pros/Cons of preventing certain keypresses (i.e., we’ve all been that person who accidentally right clicks and then hits “back” on a webpage)
			●	What kinds of tasks people tend to “hate” the most - is there any way to gamify or make your task more fun?

						
						-->
						
						<p>....</p>
						
						<p>....</p>
						
						<p>....</p>
						
						<p>....</p>
						
						<p>....</p>
					</div>
				</section>
				<section>
					<ul class="fa-ul"><li><span class="fa-li"><i class="fas fa-star"></i></span><h4 id="subsec44t4">Communicating the results of your study</h4></li></ul>
					<div>
						<!--
						
						Sample communication about MTurk, including potential questions that have been raised by reviewers, like ‘high exclusion rate’ - why? Also, perhaps the demo on the Stroop task will average the reaction time, accuracy, etc. which can be further reported here.
						
						-->
						
						<p>....</p>
						
						<p>....</p>
						
						<p>....</p>
						
						<p>....</p>
						
						<p>....</p>

						<p>Please remember to evaluate the subsection with the Google Form below so this can be improved in the future (you can find the results from the <a href="https://docs.google.com/spreadsheets/d/1vsbuiWGgInSKDy7KHE1i3imfvkMGMshlKRDb4-xxC4k/edit?usp=sharing" class="copy-link">Google Form</a> here).</p>
						
						<div id="googleForm"><iframe src="https://docs.google.com/forms/d/e/1FAIpQLSdrk0UgNaSJPOx5OaZd9ZCk1wdX5CvLIXuiMpBVyYSj1N7NYA/viewform?embedded=true" width="640" height="902" frameborder="0" marginheight="0" marginwidth="0">Loading…</iframe></div>
					</div>
				</section>
				<hr>
				<section>
					<h2 id="testyourself" class="pad1">Test Yourself:</h2>	
					<!--from: https://codepen.io/teachtyler/pen/raEprM -->
					<div id="quiz mainfont">
					  <button id="submit-button mainfont">Submit Answers</button>
					  <button id="next-question-button mainfont">Next Question</button>
					  <button id="prev-question-button mainfont">Previous</button>

					  <div id="quiz-results mainfont">

						<p id="quiz-results-message mainfont"></p>
						<p id="quiz-results-score mainfont"></p>
						<button id="quiz-retry-button mainfont">Retry</button>

					  </div>
					</div>
				</section>
				<section>
					<h2 id="assignments" class="pad1">Continue Learning:</h2>
					<div>
						<ul class="fa-ul">
							<li><i class="fa-li fas fa-database"></i>One final assignment can also be to look through sample code and have students describe what the experiment is actually about. Have them fill in the parameters and give a general description of the experiment (e.g., what is the timeline? What should people see on screen?)</li>
							<li><i class="fa-li fab fa-stack-overflow"></i>Can come up with stereotypical “advice” questions or hypothetical scenarios and ask them what they would do or how they would respond (e.g., “You told me to get above X accuracy, but the task didn’t tell me how well I was doing!” 1) give trial-by-trial fb; 2) give cumulative run/block fb; 3) make sure your guidelines for a task match what you have participants do)</li>
							<li><i class="fa-li fas fa-user-graduate"></i>Test your own task all the way through on sandbox and look at the output: does the output look like you need it to, in order to do your final analyses? Send your code to other peers in your lab or department and get feedback on the task.</li>
							<li><i class="fa-li fas fa-user"></i>Apply your JavaScript, HTML, and CSS skills to make your own website</li>
						</ul>
					</div>
					<div class="scrollstyle mainfont pad1" id="top-scroll" aria-labelledby="scroll-to-top">
						<a class="copy-link" href="#top" rel="tooltip" data-toggle="tooltip" aria-labelledby="tooltip" data-placement="left" title="Scroll to top">
							<i class="fas fa-angle-up fa-3x"></i>
						</a>
					</div>
					<div class="row pad-l1 pad-b75 pad-t75"></div>
				</section>
			</main>
		</div>
	</div>	
    <!-- Bootstrap core JavaScript-->
    <!-- Placed at the end of the document so the pages load faster -->	
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/js/bootstrap.min.js" integrity="sha384-h0AbiXch4ZDo7tp9hKZ4TsHbi047NrKGLO3SEJAg45jXxnGIfYzk4Si90RDIqNm1" crossorigin="anonymous"></script>
	
	<script type="text/javascript">
	$(document).ready(function(){
	
		//this is the scroll to the top arrow; it selects any select that says href=#top and when you click that link, it animates the html body to slowly scroll to the top
		$("a[href='#top']").click(function() {
            $('html,body').animate({scrollTop: 0}, "slow");
			return false;
        });
		//this is the tooltip hover that explains what the scroll to the top arrow is in case someone is not familiar with that
		$('[rel=tooltip]').tooltip({ trigger: "hover" });
		
	});
	</script>
</body>
</html>